<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<title>Oblivion</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<div id="Tasks"><h2 id="Tasks" class="header"><a href="#Tasks">Tasks</a></h2></div>
<ul>
<li class="done2">
Oblivion Less Bounded -  alpha version release

<ol>
<li class="done3">
Figure out how to use messageboxes reasonably

<ul>
<li class="done3">
This is mostly done, not super ideal

</ul>
<li class="done4">
Solve the disabled mouse problem (enable mouse during MenuMode 2??)

<li>
Customize randomization - maybe idk if I want it for an alpha

<li class="done1">
Add random places to start

<li class="done2">
Equipment randomization

<ul>
<li class="done2">
Expand current ideas

</ul>
<li class="done2">
Finish MQ additions

<ol>
<li class="done2">
Get "Find Emperor" quest in complete state

<ul>
<li class="done0">
Find bugs

<li class="done4">
Clean up writing

<li class="done4">
Spread papers around, remove once quest is done

<li class="done0">
Remove changes once emperor is found dead

<li class="done4">
Make sure Baurus works

</ul>
<li class="done3">
Get "Go to Jail" quest in complete state

<ul>
<li class="done2">
Find bugs

<ul>
<li class="done4">
things don't get killed when walking into ImperialDungeon03

<li class="done4">
can't set stage to 85, the script does its thing once for some reason

<li class="done4">
baurus and emperor go towards each other, try to fix

<ul>
<li>
not sure what the deal is here, the markers are separated properly

</ul>
<li class="done0">
baurus might say his "we need to get out of here" topic when going into ImperialDungeon03

</ul>
<li class="done2">
Add timers to setstage 50 and 55 so that it doesn't pop up instantly

<ul>
<li class="done4">
setstage 55 needs it to make the button appear more natural

<li class="done4">
50 needs it to just not be spammy

<li>
also add timer to when we get thrown in jail

</ul>
<li class="done4">
kill all mythic dawn fucks in script

<li class="done4">
make sure people are killed in ImperialDungeon03, currently they are not killed properly

<ul>
<li>
not sure if this is the best way to do this????

<li>
seems like there are performance probs

</ul>
<li class="done4">
check performance throughout the mod

<li class="done4">
Get sent to jail safely in and out of quest

<li class="done4">
"Escape" Imperial Dungeon, find Emperor and do that stuff

<li class="done4">
Remove all stuff, give clothes and stuff

<li class="done4">
Have the player recollect items after quest

</ul>
</ol>
<li class="done0">
change dark brotherhood quest that says you escaped from sewers unless you did

</ol>
</ul>

<div id="Generic Menus Notes"><h2 id="Generic Menus Notes" class="header"><a href="#Generic Menus Notes">Generic Menus Notes</a></h2></div>
<p>
Generic menus are a way for mod authors to create menus that behave like vanilla menus instead of relying on <code>MessageBox</code>.
Generic menus require the following xml setup:
</p>
<pre class="brush: xml">
&lt;menu name="MenuName"&gt;
  &lt;class&gt; &amp;GenericMenu; &lt;/class&gt;
  &lt;stackingtype&gt; &amp;no_click_past; &lt;/stackingtype&gt;
  &lt;explorefade&gt; 0.25 &lt;/explorefade&gt;
&lt;/menu&gt;
</pre>
<p>
The name can be whatever, without spaces, and the class must always be <code>GenericMenu</code>.
The <code>explorefade</code> and <code>stackingtype</code> traits must have those values.
A generic menu can contain any valid menu traits, and can be built how the author desires.
It has menu type <code>1011</code> and must be contained in <code>Data\Menus\Generic\</code>.
</p>

<p>
The generic menu is called with <code>ShowGenericMenu "path\to\menu.xml" closingID(int)</code>.
The closing ID is the menu element that uses said ID.
It is optional, if not provided than any ID above 0 will close the menu when clicked/interacted.
</p>

<p>
The vanilla game uses the executable to control all menus, thus we need to script all features ourselves.
The use of menu event handlers is incredibly important and determines how we can control said menu.
It is called with <code>SetMenuEventHandler</code> and has specific handlers it can take.
These handlers requires specific parameters for the functions that get called however:
<table>
<tr>
<th>
Name
</th>
<th>
Parameters
</th>
</tr>
<tr>
<td>
<code>OnOpen</code>
</td>
<td>
<code>menuType:int</code>
</td>
</tr>
<tr>
<td>
<code>OnClose</code>
</td>
<td>
<code>menuType:int</code>
</td>
</tr>
<tr>
<td>
<code>OnClick</code>
</td>
<td>
<code>menuType:int, tile:string, id:int</code>
</td>
</tr>
<tr>
<td>
<code>OnMouseover</code>
</td>
<td>
<code>menuType:int, tile:string, id:int</code>
</td>
</tr>
</table>
</p>

<p>
The functions for these handlers must contain the parameters in order to work, even if they're being used.
For example:
</p>
<pre>
scn DemoMenuMouseover
int menu
string_var tile
int id
Begin Function {menu, tile, id}
  SetDebugMode 1
    DebugPrint "menu: %g tile: %z id: %g", menu, tile, id
  SetDebugMode 0
End
</pre>

<pre>
scn DemoMenuEventHandler
ref rEventScript
Begin Function {}
  set rEventScript to DemoMenuScrollHandler
  SetMenuEventHandler "OnClick", rEventScript, 1011
End
</pre>


<div id="Last Problem"><h2 id="Last Problem" class="header"><a href="#Last Problem">Last Problem</a></h2></div>
<ul>
<li>


</ul>

<div id="Random Oblivion Facts"><h2 id="Random Oblivion Facts" class="header"><a href="#Random Oblivion Facts">Random Oblivion Facts</a></h2></div>
<div id="Random Oblivion Facts-GoToJail"><h4 id="GoToJail" class="header"><a href="#Random Oblivion Facts-GoToJail">GoToJail</a></h4></div>
<ul>
<li>
This function only works in dialogue result scripts

<li>
This function only works if all equipped equipment can be removed

</ul>

</body>
</html>
